import{_ as V,u as M,r,o as D,c as h,b as u,d as l,l as _,g as a,m as c,p as L,F as C,n as w,v as S,q as G,t as i,K as X,x as I,j as d,s as P}from"./main-BT7iXV3b.js";const E={class:"foods-view"},B={class:"container"},R={class:"filters-section card"},q={class:"search-box"},H={class:"filter-group"},O={class:"filter-buttons"},T=["onClick"],$={class:"filter-group"},j=["value"],z={class:"filter-group"},Q={class:"checkbox-label"},W={class:"filter-group"},Z={class:"filter-group"},J={class:"results-info"},Y={class:"foods-grid"},ll={class:"food-header"},sl={key:0,class:"availability-badge"},el={class:"food-nutrients"},tl={class:"nutrient-item"},il={class:"nutrient-item"},ol={class:"nutrient-item"},nl={class:"nutrient-item"},al={class:"food-price"},rl={class:"price-value"},ul=["onClick"],dl={key:0,class:"empty-state"},vl={class:"modal-header"},pl={class:"modal-body"},cl={class:"detail-section"},gl={class:"nutrients-detail-grid"},bl={class:"nutrient-detail"},ml={class:"nutrient-detail"},yl={class:"nutrient-detail"},fl={class:"nutrient-detail"},kl={class:"nutrient-detail"},_l={class:"nutrient-detail"},Cl={class:"nutrient-detail"},wl={class:"detail-section"},Pl={class:"info-items"},Fl={class:"info-item"},Ul={class:"info-item"},Ll={class:"info-item"},Sl={class:"info-item price-item"},xl={class:"detail-section"},Kl={class:"cost-analysis-grid"},Al={class:"cost-item"},Nl={class:"cost-value"},Vl={class:"cost-item"},Ml={class:"cost-value"},Dl={class:"cost-item"},hl={class:"cost-value"},Gl={class:"cost-item"},Xl={class:"cost-value"},Il={__name:"FoodsView",setup(El){const{t:Bl}=M(),g=r(""),b=r("all"),m=r("all"),k=r(!1),v=r(null),p=r("name"),F=r([]),x=async()=>{try{const t=await I.getLocalFoods();if(Array.isArray(t)){const s=new Set,e=t.filter(n=>{const f=n.name||"Unknown";return s.has(f)?!1:(s.add(f),!0)});F.value=e.map((n,f)=>({id:n.id!=null?String(n.id):`food_${f}`,name:n.name||"Unknown",category:(n.category||"other").toLowerCase(),region:(n.region||"all").toLowerCase(),energy:n.energy||0,protein:n.protein||0,carbs:n.carbs||0,fat:n.fat||0,fiber:n.fiber||0,calcium:n.calcium||0,iron:n.iron||0,pricePerKg:n.pricePerKg||0,available:!!n.available}))}}catch(t){console.error("Failed to load foods from API",t)}};D(()=>{x()});const K=[{value:"all",label:"All Foods",icon:"pi pi-th-large"},{value:"staples",label:"Staples",icon:"pi pi-circle-fill"},{value:"proteins",label:"Proteins",icon:"pi pi-heart"},{value:"vegetables",label:"Vegetables",icon:"pi pi-sun"},{value:"fruits",label:"Fruits",icon:"pi pi-star"},{value:"fats",label:"Fats & Oils",icon:"pi pi-leaf"}],A=[{value:"all",label:"All Regions"},{value:"central",label:"Central Uganda"},{value:"western",label:"Western Uganda"},{value:"eastern",label:"Eastern Uganda"},{value:"northern",label:"Northern Uganda"}],y=h(()=>{let t=F.value;return g.value&&(t=t.filter(s=>s.name.toLowerCase().includes(g.value.toLowerCase()))),b.value!=="all"&&(t=t.filter(s=>s.category===b.value)),m.value!=="all"&&(t=t.filter(s=>s.region===m.value||s.region==="all")),k.value&&(t=t.filter(s=>s.available)),v.value!=null&&!isNaN(Number(v.value))&&(t=t.filter(s=>(s.pricePerKg||0)<=Number(v.value))),p.value==="price_asc"?t=t.sort((s,e)=>(s.pricePerKg||0)-(e.pricePerKg||0)):p.value==="price_desc"?t=t.sort((s,e)=>(e.pricePerKg||0)-(s.pricePerKg||0)):p.value==="energy_desc"?t=t.sort((s,e)=>(e.energy||0)-(s.energy||0)):t=t.sort((s,e)=>(s.name||"").localeCompare(e.name||"")),t}),o=r(null),N=t=>{o.value=t},U=()=>{o.value=null};return(t,s)=>(d(),u("div",E,[l("div",B,[s[24]||(s[24]=l("div",{class:"foods-header"},[l("div",{class:"header-content"},[l("h1",null,[l("i",{class:"pi pi-book"}),a(" Local Foods Database")]),l("p",null,"Discover nutritious locally-sourced Ugandan foods for elderly nutrition")])],-1)),l("div",R,[l("div",q,[s[6]||(s[6]=l("i",{class:"pi pi-search"},null,-1)),c(l("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),type:"text",placeholder:"Search foods...",class:"search-input"},null,512),[[L,g.value]])]),l("div",H,[s[7]||(s[7]=l("label",null,"Category:",-1)),l("div",O,[(d(),u(C,null,w(K,e=>l("button",{key:e.value,onClick:n=>b.value=e.value,class:P(["filter-btn",{active:b.value===e.value}])},[l("i",{class:P(e.icon)},null,2),a(" "+i(e.label),1)],10,T)),64))])]),l("div",$,[s[8]||(s[8]=l("label",null,"Region:",-1)),c(l("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),class:"form-control"},[(d(),u(C,null,w(A,e=>l("option",{key:e.value,value:e.value},i(e.label),9,j)),64))],512),[[S,m.value]])]),l("div",z,[s[10]||(s[10]=l("label",null,"Availability:",-1)),l("label",Q,[c(l("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e)},null,512),[[G,k.value]]),s[9]||(s[9]=a(" Only show available",-1))])]),l("div",W,[s[11]||(s[11]=l("label",null,"Max price (UGX/kg):",-1)),c(l("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),class:"form-control",placeholder:"e.g. 5000"},null,512),[[L,v.value,void 0,{number:!0}]])]),l("div",Z,[s[13]||(s[13]=l("label",null,"Sort:",-1)),c(l("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>p.value=e),class:"form-control"},[...s[12]||(s[12]=[l("option",{value:"name"},"Name (A–Z)",-1),l("option",{value:"price_asc"},"Price (Low → High)",-1),l("option",{value:"price_desc"},"Price (High → Low)",-1),l("option",{value:"energy_desc"},"Energy (High → Low)",-1)])],512),[[S,p.value]])])]),l("div",J,[l("p",null,[s[14]||(s[14]=a("Showing ",-1)),l("strong",null,i(y.value.length),1),a(" food"+i(y.value.length!==1?"s":""),1)])]),l("div",Y,[(d(!0),u(C,null,w(y.value,e=>(d(),u("div",{key:e.id,class:"food-card"},[l("div",ll,[l("div",{class:P(["food-category",e.category])},i(e.category),3),e.available?(d(),u("div",sl,[...s[15]||(s[15]=[l("i",{class:"pi pi-check-circle"},null,-1),a(" Available ",-1)])])):_("",!0)]),l("h3",null,i(e.name),1),l("div",el,[l("div",tl,[s[16]||(s[16]=l("i",{class:"pi pi-bolt"},null,-1)),l("span",null,i(e.energy)+" kcal",1)]),l("div",il,[s[17]||(s[17]=l("i",{class:"pi pi-heart"},null,-1)),l("span",null,i(e.protein)+"g protein",1)]),l("div",ol,[s[18]||(s[18]=l("i",{class:"pi pi-chart-line"},null,-1)),l("span",null,i(e.carbs)+"g carbs",1)]),l("div",nl,[s[19]||(s[19]=l("i",{class:"pi pi-circle"},null,-1)),l("span",null,i(e.fiber)+"g fiber",1)])]),l("div",al,[s[20]||(s[20]=l("i",{class:"pi pi-money-bill"},null,-1)),l("span",rl,i(e.pricePerKg.toLocaleString())+" UGX",1),s[21]||(s[21]=l("span",{class:"price-unit"},"per kg",-1))]),l("button",{onClick:n=>N(e),class:"view-details-btn"},[...s[22]||(s[22]=[l("i",{class:"pi pi-eye"},null,-1),a(" View Details ",-1)])],8,ul)]))),128))]),y.value.length===0?(d(),u("div",dl,[...s[23]||(s[23]=[l("i",{class:"pi pi-inbox"},null,-1),l("h3",null,"No Foods Found",-1),l("p",null,"Try adjusting your search or filters",-1)])])):_("",!0)]),o.value?(d(),u("div",{key:0,class:"modal-overlay",onClick:U},[l("div",{class:"modal-card food-details-modal",onClick:s[5]||(s[5]=X(()=>{},["stop"]))},[l("div",vl,[l("h2",null,i(o.value.name),1),l("button",{onClick:U,class:"close-btn"},[...s[25]||(s[25]=[l("i",{class:"pi pi-times"},null,-1)])])]),l("div",pl,[l("div",cl,[s[33]||(s[33]=l("h4",null,"Nutritional Information (per 100g)",-1)),l("div",gl,[l("div",bl,[s[26]||(s[26]=l("strong",null,"Energy",-1)),l("span",null,i(o.value.energy)+" kcal",1)]),l("div",ml,[s[27]||(s[27]=l("strong",null,"Protein",-1)),l("span",null,i(o.value.protein)+" g",1)]),l("div",yl,[s[28]||(s[28]=l("strong",null,"Carbohydrates",-1)),l("span",null,i(o.value.carbs)+" g",1)]),l("div",fl,[s[29]||(s[29]=l("strong",null,"Fat",-1)),l("span",null,i(o.value.fat)+" g",1)]),l("div",kl,[s[30]||(s[30]=l("strong",null,"Fiber",-1)),l("span",null,i(o.value.fiber)+" g",1)]),l("div",_l,[s[31]||(s[31]=l("strong",null,"Calcium",-1)),l("span",null,i(o.value.calcium)+" mg",1)]),l("div",Cl,[s[32]||(s[32]=l("strong",null,"Iron",-1)),l("span",null,i(o.value.iron)+" mg",1)])])]),l("div",wl,[s[42]||(s[42]=l("h4",null,"Information",-1)),l("div",Pl,[l("div",Fl,[s[35]||(s[35]=l("i",{class:"pi pi-tag"},null,-1)),l("span",null,[s[34]||(s[34]=l("strong",null,"Category:",-1)),a(" "+i(o.value.category),1)])]),l("div",Ul,[s[37]||(s[37]=l("i",{class:"pi pi-map-marker"},null,-1)),l("span",null,[s[36]||(s[36]=l("strong",null,"Region:",-1)),a(" "+i(o.value.region==="all"?"All regions":o.value.region),1)])]),l("div",Ll,[s[39]||(s[39]=l("i",{class:"pi pi-check-circle"},null,-1)),l("span",null,[s[38]||(s[38]=l("strong",null,"Availability:",-1)),a(" "+i(o.value.available?"Currently available":"Seasonal"),1)])]),l("div",Sl,[s[41]||(s[41]=l("i",{class:"pi pi-money-bill"},null,-1)),l("span",null,[s[40]||(s[40]=l("strong",null,"Price:",-1)),a(" "+i(o.value.pricePerKg.toLocaleString())+" UGX per kg",1)])])])]),l("div",xl,[s[47]||(s[47]=l("h4",null,"Cost Analysis",-1)),l("div",Kl,[l("div",Al,[s[43]||(s[43]=l("span",{class:"cost-label"},"Cost per 100g",-1)),l("span",Nl,i(Math.round(o.value.pricePerKg/10).toLocaleString())+" UGX",1)]),l("div",Vl,[s[44]||(s[44]=l("span",{class:"cost-label"},"Cost per serving (250g)",-1)),l("span",Ml,i(Math.round(o.value.pricePerKg*.25).toLocaleString())+" UGX",1)]),l("div",Dl,[s[45]||(s[45]=l("span",{class:"cost-label"},"Protein cost efficiency",-1)),l("span",hl,i(Math.round(o.value.pricePerKg/(o.value.protein*10)).toLocaleString())+" UGX/g",1)]),l("div",Gl,[s[46]||(s[46]=l("span",{class:"cost-label"},"Energy cost efficiency",-1)),l("span",Xl,i(Math.round(o.value.pricePerKg/(o.value.energy*10)).toLocaleString())+" UGX/kcal",1)])])])])])])):_("",!0)]))}},ql=V(Il,[["__scopeId","data-v-1084280d"]]);export{ql as default};
