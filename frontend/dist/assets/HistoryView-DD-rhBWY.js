import{_ as S,u as P,c as h,b as n,d as s,g as a,l as r,f,i as V,F as _,n as b,j as i,t as l,s as M}from"./main-BT7iXV3b.js";import{u as N}from"./chatStore-DN0nHc3q.js";import{u as x}from"./predictionStore-GKhK2K91.js";const R={class:"history-view"},F={class:"container"},L={class:"history-section"},T={class:"section-header"},$={key:0,class:"empty-state"},B={key:1,class:"history-grid"},I=["onClick"],U={class:"card-header"},E={class:"card-info"},O={class:"timestamp"},Y={class:"card-content"},j={class:"info-row"},z={class:"value"},K={class:"info-row"},W={class:"value"},q={key:0,class:"info-row"},G={class:"value"},J={key:1,class:"info-row"},Q={class:"value"},X={class:"history-section"},Z={class:"section-header"},ss={key:0,class:"empty-state"},ts={key:1,class:"history-grid"},os=["onClick"],ns={class:"card-header"},is={class:"card-info"},es={class:"timestamp"},ls={class:"card-content"},as={class:"caloric-display"},rs={class:"caloric-value"},ds={class:"info-row"},us={class:"value"},cs={class:"info-row"},ps={key:0,class:"info-row"},vs={class:"value"},ys={key:1,class:"info-row"},ms={class:"value"},gs={__name:"HistoryView",setup(hs){const d=V(),{t:fs}=P(),c=N(),u=x(),p=h(()=>c.conversationHistory||[]),v=h(()=>u.predictionHistory||[]),y=e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},w=e=>["60-70 years","70-80 years","80+ years"][e]||"Unknown",m=e=>["Central","Western","Eastern","Northern"][e]||"Unknown",C=e=>["Hypertension","Diabetes","Anemia","Osteoporosis","Heart Disease","Kidney Disease","Arthritis","Healthy"][e]||"Unknown",k=e=>{c.loadConversationFromHistory(e),d.push("/chat")},H=e=>{u.currentInput=e.input,u.currentPrediction=e.result,d.push("/results")},D=()=>{confirm("Are you sure you want to clear all chat history? This cannot be undone.")&&c.clearHistory()},A=()=>{confirm("Are you sure you want to clear all prediction history? This cannot be undone.")&&u.clearHistory()};return(e,t)=>(i(),n("div",R,[s("div",F,[t[29]||(t[29]=s("div",{class:"view-header"},[s("h1",null,[s("i",{class:"pi pi-history"}),a(" History")]),s("p",{class:"view-description"}," View your past conversations and meal plan predictions ")],-1)),s("div",L,[s("div",T,[t[3]||(t[3]=s("h2",null,[s("i",{class:"pi pi-comments"}),a(" Chat Conversations")],-1)),p.value.length>0?(i(),n("button",{key:0,onClick:D,class:"btn btn-secondary btn-sm"},[...t[2]||(t[2]=[s("i",{class:"pi pi-trash"},null,-1),a(" Clear All ",-1)])])):r("",!0)]),p.value.length===0?(i(),n("div",$,[t[5]||(t[5]=s("i",{class:"pi pi-inbox"},null,-1)),t[6]||(t[6]=s("h3",null,"No Chat History",-1)),t[7]||(t[7]=s("p",null,"Your chat conversations will appear here",-1)),s("button",{onClick:t[0]||(t[0]=o=>f(d).push("/chat")),class:"btn btn-primary"},[...t[4]||(t[4]=[s("i",{class:"pi pi-comments"},null,-1),a(" Start a Chat ",-1)])])])):(i(),n("div",B,[(i(!0),n(_,null,b(p.value,o=>(i(),n("div",{key:o.id,class:"history-card chat-card",onClick:g=>k(o.id)},[s("div",U,[t[9]||(t[9]=s("div",{class:"card-icon"},[s("i",{class:"pi pi-comments"})],-1)),s("div",E,[t[8]||(t[8]=s("h3",null,"Chat Conversation",-1)),s("p",O,l(y(o.timestamp)),1)])]),s("div",Y,[s("div",j,[t[10]||(t[10]=s("span",{class:"label"},"Messages:",-1)),s("span",z,l(o.messages.length),1)]),s("div",K,[t[11]||(t[11]=s("span",{class:"label"},"Stage:",-1)),s("span",W,l(o.stage),1)]),o.collectedData.age_group!==null?(i(),n("div",q,[t[12]||(t[12]=s("span",{class:"label"},"Age:",-1)),s("span",G,l(w(o.collectedData.age_group)),1)])):r("",!0),o.collectedData.region!==null?(i(),n("div",J,[t[13]||(t[13]=s("span",{class:"label"},"Region:",-1)),s("span",Q,l(m(o.collectedData.region)),1)])):r("",!0)]),t[14]||(t[14]=s("div",{class:"card-footer"},[s("button",{class:"view-btn"},[s("i",{class:"pi pi-eye"}),a(" View Conversation ")])],-1))],8,I))),128))]))]),s("div",X,[s("div",Z,[t[16]||(t[16]=s("h2",null,[s("i",{class:"pi pi-chart-line"}),a(" Meal Plan Predictions")],-1)),v.value.length>0?(i(),n("button",{key:0,onClick:A,class:"btn btn-secondary btn-sm"},[...t[15]||(t[15]=[s("i",{class:"pi pi-trash"},null,-1),a(" Clear All ",-1)])])):r("",!0)]),v.value.length===0?(i(),n("div",ss,[t[18]||(t[18]=s("i",{class:"pi pi-inbox"},null,-1)),t[19]||(t[19]=s("h3",null,"No Prediction History",-1)),t[20]||(t[20]=s("p",null,"Your meal plan predictions will appear here",-1)),s("button",{onClick:t[1]||(t[1]=o=>f(d).push("/predict")),class:"btn btn-primary"},[...t[17]||(t[17]=[s("i",{class:"pi pi-plus-circle"},null,-1),a(" New Prediction ",-1)])])])):(i(),n("div",ts,[(i(!0),n(_,null,b(v.value,(o,g)=>(i(),n("div",{key:g,class:"history-card prediction-card",onClick:_s=>H(o)},[s("div",ns,[t[22]||(t[22]=s("div",{class:"card-icon prediction-icon"},[s("i",{class:"pi pi-chart-line"})],-1)),s("div",is,[t[21]||(t[21]=s("h3",null,"Meal Plan",-1)),s("p",es,l(y(o.timestamp)),1)])]),s("div",ls,[s("div",as,[s("span",rs,l(Math.round(o.result.prediction.caloric_needs)),1),t[23]||(t[23]=s("span",{class:"caloric-unit"},"kcal/day",-1))]),s("div",ds,[t[24]||(t[24]=s("span",{class:"label"},"Model:",-1)),s("span",us,l(o.result.prediction.model),1)]),s("div",cs,[t[25]||(t[25]=s("span",{class:"label"},"Source:",-1)),s("span",{class:M(["value status-badge",o.result.status])},l(o.result.status==="online"?"Hugging Face":o.result.status==="local"?"Local Model":o.result.status==="offline"?"Offline Model":o.result.status),3)]),o.input.region_encoded!==void 0?(i(),n("div",ps,[t[26]||(t[26]=s("span",{class:"label"},"Region:",-1)),s("span",vs,l(m(o.input.region_encoded)),1)])):r("",!0),o.input.condition_encoded!==void 0?(i(),n("div",ys,[t[27]||(t[27]=s("span",{class:"label"},"Condition:",-1)),s("span",ms,l(C(o.input.condition_encoded)),1)])):r("",!0)]),t[28]||(t[28]=s("div",{class:"card-footer"},[s("button",{class:"view-btn"},[s("i",{class:"pi pi-eye"}),a(" View Results ")])],-1))],8,os))),128))]))])])]))}},ks=S(gs,[["__scopeId","data-v-2c448542"]]);export{ks as default};
